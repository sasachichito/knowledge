アジャイルモデリングとは、原則とプラクティスの集合を指す。
# 基本原則
- ソフトウェアが第1のゴール
- 

## ソフトウェアが第1のゴール
ソフトウェア開発で1番大事なのは、プロジェクトの利害関係者のニーズを効果的に満たす高品質のソフトウェアを開発することです。
この原則は、アジャイルアライアンスの原則(2001b)である“動作するソフトウェアが進捗を測る第1手段”を言い換えたものです。 
好むと好まざるとにかかわらず、本筋とは関係ないドキュメント、本筋とは関係ない管理成果物、モデルを作ることですら第1目標ではありません。 
本筋とは関係ない文書を作るというのは、本当はそうでもないにかかわらず、開発が進んでいると自分を欺けるので気持ちが楽になるかもしれません。 
実際には、ドキュメント作成は困難な仕事を避けるものであり、コードやテストコードを書くとあらかじめ考えたアプローチが予想どおりにはいかないことが露呈するでしょう。
進捗レポートを書き、 自分の成功をみんなに吹聴したり、(もっと性質が悪いことですが)失敗を隠したりすることで、自分は良い気分でいられるでしょう。
しかし、それで最終目標に近づけるわけではありません。ユーザーのためのシステムを作るという重要なことに専念する勇気を持ちましょう。
私達は、 ドキュメント開発者ではなく、モデル開発者ですらありません。私達は、ソフトウェア開発者です。このことをよく考えてみましょう。
高品質のソフトウェアを作成するという目的に直接貢献しない作業は疑うべきであり、もし適切に正当化できなければその作業を避けるべきです。

## 次への備えが第2のゴール
動作するシステムをユーザーに納品しても、プロジェクトが失敗だと思われる場合があります。プロジェクトの利害関係者のニーズを満たすことには、
システムを以降の拡張に耐えられるほど十分堅牢なものにするということが含まれています。 Alistair Cockburn(2001b)が言っているように、ソフトウェア開発というゲームに加わっている場合、
あなたの第2の目標は次のゲームに対して備えることです。次に来るのは、システムの次のメジャーリリースの場合も、開発している現バージョンの単なる運用やサポートの場合もあります。
それを可能にするためには、品質の良いソフトウェアを作ろうとするだけでは不十分であり、次のゲームに参加する人達が効果的になったり、あなたのチームの開発者から他の人達への引き継ぎを行ったり、
既存のスタッフを引き留めてシステムの次のリリースを開発するように、もしくは単に開発組織に留まるように動機付けたりするために、最低限のドキュメントを作るべきです。
その際には、現在の開発者の性格、次の仕事の性格、次の仕事の開発組織における重要性などを考慮する必要があります。手短に言えば、システムを開発している時には、
将来に目を向ける必要があるということです。この原則は、AMの価値であるコミュニケーションを支えます。

## 身軽な旅
身軽な旅は、開発で必要な最低限のモデルとドキュメントを作成するということを意味しています。
あなたが作成し、維持しようと決めたすべての成果物は、時間の経過とともに保守する必要があります。このような成果物としては、モデル、文書、スケジュールのような
管理成果物、テストスイート、ソースコードが含まれます。たとえば、7つのモデルを維持しようと思った場合を考えましょう。
要求事項が追加/変更されたり、新たなアプローチが採用されたり、新たな技術を取り入れたりして変更が発生した場合、あなたはそれら7つのモデルへの変更の波及を考え、考えた変更を適用する必要があります。
もし、維持するモデルが3つだけなら、同様な変更が発生しても必要な変更作業はより少なくて済み、身軽な旅のおかげでよりアジャイルになることができます。
同様に、モデルがより複雑/詳細であれば、どのような変更であれ、加えるのが困難になるでしょう(個別のモデルが“重く”なり、維持する労力が増えます)。モデルを維持しょうと決意するたびに、
抽象的な形態(結果として、潜在的に利害関係者やチーム内のコミュニケーションを促進します)でチームに情報を提供するという便宜と引き換えに、アジャイルさを犠牲にしていることになります。
このトレードオフの深刻さを過小評価しないでください。Jim Highsmith(2000)は、砂漠を横断するならば、地図、帽子、良いブーツ、水筒が役立つだろうと指摘しています。
同様な状況で重荷になる何百ガロンもの水、考えられるありとあらゆるサバイバル用品のパック、砂漠に関する書籍群を携えては砂漠を横断できないでしょう。しかし、身軽すぎることも問題であり、
最低限の装備を携えずに砂漠を横断しょうとするのは明らかに愚の骨頂です。同様に、開発チームが詳細な要求文書、詳細な分析モデル群、詳細なアーキテクチャモデル群、詳細な設計モデル群を維持することを決意した場合、
自分達が大半の時間をソースコードを書く代わりに文書の更新に使っていることにすぐに気付くでしょう。良い経験則としては、本当に必要だと明らかになるまで、モデルを保守イールしないことです。
身軽な旅を効果的に行うためには、チーム内のコミュニケーションが円滑である必要があります。開発者が要求事項やアーキテクチャの方式を理解できず、
開発者の質問に対して即座に回答を得る手助けを行う人が最低限いなければ、大変な目にあうでしょう。明らかに、身軽な旅には良好なコミュニケーションが必要なのです。
身軽な旅には勇気が必要であり、特定の成果物が必要ないと信じつつも、その仮定が間違っていたら作れるように備えます。身軽な旅は、開発において成果物を保守する労力を著しく削減するため、開発のアプローチを簡潔にします。

## 簡潔さを心がけよう
開発する際には、本節のタイトルが示すように、最も簡単な解が最善の解だと仮定すべきでしょう。この原則は、明らかにAMの価値である簡潔さと、アジャイルアライアンスの原則(2001b)で述べられている簡潔さから導き出されてきた。
KentBeck(2001)が指摘するように、ほとんどの場合は最も簡潔な解で大丈夫であり、簡潔ゆえに実装も簡単です。
簡潔さの利点は、実現に長い時間と労力を要するアプローチや難しい解を実装するために余分な時間を費やさないことです。
また、最も簡単な解では役に立たない場合でも、資源を浪費しなかったおかげでより複雑な解を実装するだけの時間が残されているという利点もあります。
さらに、最も簡単な解であれば、容易に保守や拡張を行うことが可能です。この原則はソフトウェアを作り込み過ぎないように促すものであり、モデリングの場合はモデルに現在必要がない余分な機能を書かないということになります。
システムのモデルを作り込み過ぎないようにしましょう。現在既に存在する要求事項に基づいてモデリングを行い、要求が変化した時点でモデルを改良(refactor)しましょう。
この原則は、モデルをできるだけ簡単に保つことを促しています。この原則は、迷った時には最も簡潔なアプローチを取りましょうという、モデリングにおけるオッカムのかみそり（監注1）です。
常に最も簡潔なアプローチで大丈夫なのでしょうか?恐らく常に大丈夫ではないと思いますが、ほとんどの場合は大丈夫でしょう。大丈夫ではなかった場合でも、その結果として何かを学び、開発の初期で失敗することができます。
複雑なアプローチでも同様に失敗するのですが、簡単なアプローチとは対照的に、自分の考えが役に立たないことを発見するのに多大な資源を費やしてしまっているでしょう。

監注1:複数の理論が成り立つ場合、その中で最も単純な理論が良いとする考え方です。 

## 変化を受け入れよう
変化は起きるのだということを受け入れましょう。そして、それを楽しみましょう。変化は、ソフトウェア開発を面白くするものの1つです。要求事項は、時間と共に変化します。
利害関係者の要求事項に対する理解も、時間と共に変化します。プロジェクトの進行途中で利害関係者が変わり、新たな関係者が加わったり、今までの関係者が抜けたりします。
利害関係者の視点も変化し、潜在的にはプロジェクトの目標や成功基準すらも変わります。さらに、プロジェクトの途中でビジネスや技術的な環境が変化します。あなたが左右できる範囲の外でいろいろなことが起きます。
結局、時間とともにプロジェクトの環境は変化するということです。
アジャイルなモデラーは、変化を受け入れます。アジャイルなモデラーは、ソフトウェア開発には変化が当たり前だと理解しています。
アジャイルアライアンス(2001b)は、たとえプロジェクトの終盤であろうと要求事項の変化を歓迎することを推奨しています。アジャイルなモデラーは、自分達の仕事が変化の影響を受けることを理解しています。
アジャイルなモデラーは、利害関係者と積極的にコミュニケーションを取ったり、フィードバックを求めたりすることで、変化を見つけ、それに対処することができます。
アジャイルなモデラーは、変化することで利害関係者を非難しません。その代わり、変化の意図を理解し、話し合うために利害関係者と積極的に協力します。
また、その変化に取り組んだ場合にそれを実現するための方法や時期を説明することで、利害関係者が効果的な判断を下すことを助けます。さらに、アジャイルなモデラーは、自分達のモデルがモデルに過ぎす、
開発者がモデルをバラバラにし、より良いものを組み立てるであろうことを理解しています。アジャイルなモデラーは、自分達の仕事が他人に改良されることを受け入れています。
アジャイルなモデラーは、要求モデリングのような実装前の準備作業がずさんになるなど、変化を受け入れることに内在する危険性も認識しています。いずれ変化するならば、なぜ要求事項の理解に多くの時間を費やすのでしょうか?
単純に何がしかのコードをひねり出し、利害関係者が変更箇所を述べるまで待つ方がはるかに賢明ではないでしょうか?そうでしょう?間違いなのです!要求事項を現在持てる最大限の能力で理解するために時間を費やし、
それらの要求事項に基づいてソフトウェアを実装した方がはるかに良いでしょう。要求事項には変化するものもあり、その事実を受け入れるべきですが、要求事項の大半は(少なくともすぐには)変化しないのです。
AMの原則である質の高い仕事をしようや利害関係者の投資を最大限に生かそうは、ずさんになる傾向を予防するためのものであることを、心に留めておいてください。

## 少しずつ変更する
変化を受け入れるためには、ソフトウェア開発において1つの大きなリリースですべての実現するのではなく、少しずつシステムを変更するインクリメンタルなアプローチを採用する必要があります。
大きな変更は、小さくインクリメンタルな変更を積み重ねることで実現します。実際、アジャイルアライアンス(2001b)の第3原則では、動作するソフトウェアを数週間から数ヶ月の期間で何回も納品することを推奨し、納品の周期が短い方が良いとしています。アジャイルモデリングにおいて大事なことは、最初からすべてについて正解を出す必要がないということです。実際に正解を出そうとしても無理でしょう。さらに、モデルに詳細な内容のすべてを取り込む必要もありません。その時点で必要最小限の内容であれば良いのです。プロジェクトの最初から、あらゆることを表現するモデルを開発しようとするのは不毛です。その代わり、地道に小さく、詳細なモデルあるいは全体的なモデルを作り、そのモデルをインクリメンタルに徐々に発展(あるいは不要になれば廃棄)させます。自分が最初あるいは何回目かに正しいものを作れないことを受け入れるのには謙虚さが必要であり、そのことを告白するには勇気が要ります。KentBeck(2000)が言うように、「まず動くようにし、次に正しくし、それから速くする」のです。

## 目的を持ってモデリングしよう
もし自分がモデルを作っている理由や目的がわからなければ、そんな作業をなぜわざわざ行うのでしょうか?多くの開発者は、モデル、ソースコード、文書のような自分の成果物がそこそこ詳しいかとか、詳しすぎないかとか、そこそこ正確であるかとかについて気にかけます。その反面、そもそも成果物をどうして作成し、誰のために作成しているかを冷静に考えることは稀です。そのような疑問を持つためには謙虚さが必要です。自己満足のためにモデリングをしているのではなく、利害関係者のニーズを満たすためにモデリングをしているのです。
モデルを作る意義はどこにあるのでしょうか?ソフトウェアの特定の側面を理解しなければならなかったり、プロジェクトの意義を説明するために上級管理職に自分の考えを伝えなければならなかったり、今後運用/保守/拡張を行う人達にシステムを説明するドキュメントを作る必要があったりすることにあるでしょう。理解するためにモデリングを行い、伝えるためにモデリングを行うのです。次に示すものは、モデリングを行う正当な理由ではありません。

- きっちりと定められたプロセスでモデリングすることが定められており、実際にそれが妥当かどうか考えることなしに、義務的にモデリングを行う
- 誰かがモデルを欲しがっているが、それがなぜ必要なのか、作ってくださいとお願いされたからというもの以上の理由を説明できない
- 誰かと直接話し合うことが可能なのに、話し合いの代わりにモデルを作って提供する

モデリングを行う際にまず行うべきことは、モデルを作成する目的やモデルの利用者を明確にすることです。目的や利用者を特定できれば、そこそこ正確で、そこそこ詳しいモデルを作成しましょう。モデルが目的を満たせば、モデリング作業を終えるべきです。一丁上がりです。モデルが正しいことを実証するコードを書いたり、他の作業に移った方が良いでしょう。このようなやり方により、モデルを不必要に詳細に定義せずにすみ、モデルを簡潔に保つことができます。この原則は、既存のモデルに変更を加える際にも適用できます。変更を加えるためには、新たな要求事項をサポートするため、自分自身の作品をリファクタリングして整理するためなどの正当な理由が必要です。この原則で大事な点は、自分自身がモデルの利用者である場合にも、モデルの利用者を知る必要があるという点です。たとえば、保守開発者のためにモデルを作成する場合、その人達は何が本当に欲しいのでしょうか?500ページの包括的な文書でしょうか、それとも全体の動作を概説する10ページの文書でしょうか?わかりませんか?では、その人達と話をして、突き止めるべきでしょう。
別の観点で考えると、モデルがかろうじて役立つという地点は、モデルの効果が減少し始める地点でもあります。モデルを最初に考えた時点では、色々と考えを尽くすことができたり、自分が成すべきことをよりよく理解できたり、どのように実現できるかについてより良い考えを得られたりすることによって、達成感を得ることができるでしょう。さらに、モデリングを続けると、モデルを作成する目的にどんどん近づいていき、どんな目的であれ、ある時点で目的を達成するでしょう。これ以降は、モデリングを行ってもどんどん効果が減少します。そうですね。詳細なことが付け加えられるでしょう。そうですね。整合性や精度が向上するでしょうが、それがなくても次の作業に進めるでしょう。理想的には、プロジェクトにとってもっと大切なソースコードについて、何らかの作業を進めることができるでしょう。

## 複数のモデル
付録A「モデリング手法」にまとめたように、適用可能なモデリングの成果物は広範に存在します。それらの成果物には、統一モデリング言語(UML:ObjectManagementGroup2001)の図、データモデルのような構造化手法の開発成果物、本質ユーザーインターフェイスモデルのようなローテクな成果物も含まれます。各成果物には、長所や短所があります。あるものが適切な状況で、他のものが使えないことがあります。近年ソフトウェアは複雑化しているため、UMLで規定されている成果物であれ、すべての状況に適用可能な単一の成果物というのはありません。そのため、効果的であるためには、ソフトウェアシステムを表現するための複数のモデルを併用する必要があります。各モデルは、ソフトウェアの1つの側面を表現します。たとえば、図3.1はオンラインの発注のロジックを表現しているのに対し、図3.2はSWAオンラインのUIを利用者がどのように利用するかをユーザーインターフェイス(UI)フロー図で表現したものです。面白いことに、シーケンス図はUMLで規定された成果物であるのに対し、UIフロー図は(まだ)そうではありませんが、これら2つの図はSWAオンラインの大事な2つの側面を描写します。
それぞれのモデルを効果的に使い、適切ではない場合には使わないことで、複雑なモデルを1つ2つ作成する代わりに、少数の簡潔なモデルで複雑な開発内容を表現することができます。開発者であれば、システムのデータベースに関することにはデータモデルを使い、UIに関することはユーザーインターフェイスフロー図のようなUIに関するモデルを使うのはたやすいことでしょう。また、これらのことについて説明する相手が誰であろうと、一度にすべてを理解するよりも、1回に1つのモデルに焦点を当てた方が簡単でしょう。この原則は、AMの価値である簡潔さとコミュニケーションを支えます。
広範なモデルを使えるからといって、いつでもそれらすべてを使う必要はないということに注意してください。開発する対象のソフトウェアの性格そのものやAMとともに適用するソフトウェア開発プロセスに応じて、これらのモデルの少なくとも一部が必要になるでしょう。たとえば、XPのプロジェクトでは要求モデリングの主な成果物としてユーザーストーリーを用いるのに対して、統一プロセスのプロジェクトではユースケース、ビジネスルール、制約、技術的要求事項を用いるでしょう。EJBアプリケーションではUMLのような記法を用いた設計成果物が必要になりますが、データウェアハウスのプロジェクトではデータモデルが必要になります。異なる種類のプロジェクトでは、異なる成果物のサブセットが必要になるのです。アジャイルなモデラーとして効果的になるためには、広範な成果物から状況に応じて適切な成果物を適用することを学ばねばならないでしょう。効果的であり続けるためには、学校を卒業したばかりの新人やビジネスを理解する利害関係者から常に新たな技術を勉強できると認める謙虚さ(AMの価値)が必要でしょう。

- 複数のテクニックが入った“考えるための道具箱”が必要  
本書を通じて私は、大工さんが大工道具の箱を持っているように、開発者は必要に応じて適用できるテクニックを蓄えた“考えるための道具箱"(McConnell1993)を持つべきだというたとえを用いています。
より多くの道具を手にし、それらの適用方法を理解するにつれて、必要な時に適切な道具を使うことができるでしょうから、開発者としてより効果的になることができるでしょう。家庭での修理に、道具箱にあるすべての道具を使う必要がないのと同様に、開発において知りうるすべてのテクニックを使わなければならないことはありません。家庭での様々な修理をすべて考えると道具箱の各道具はそれぞれ使われる局面があり、同様に様々な開発にかかわると知っている様々なモデリングテクニックを使う局面があるでしょう。結果的には、いくつかの道具は他の道具よりよく使われるのと同様、ある種のモデリングテクニックは他のものよりよく使われるでしょう。
